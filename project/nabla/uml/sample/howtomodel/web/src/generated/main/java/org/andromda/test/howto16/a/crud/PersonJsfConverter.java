// license-header java merge-point
// Generated by andromda-jsf cartridge (crud\EntityConverter.java.vsl) DO NOT EDIT!
package org.andromda.test.howto16.a.crud;

import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.ConverterException;
import org.andromda.test.ManageableServiceLocator;
import org.andromda.test.howto16.a.Person;

/**
 * Handles conversion of the entity id to a String.
 */
public class PersonJsfConverter
    implements Converter
{
    /**
     * @see Converter#getAsString(FacesContext, UIComponent, Object)
     */
    public String getAsString(
        FacesContext context,
        UIComponent component,
        Object value)
        throws ConverterException
    {
        if(value == null)
            return "";

        //final PersonValueObject vo;
        final Person vo;
        try {
            final String id;
            if(value instanceof String)
                id = String.valueOf((String)value);
            else
                id = (String)value;

            vo = ManageableServiceLocator.instance().getPersonManageableService().readById(id);
        } catch (Exception e) {
            e.printStackTrace();
            return ("Failed to locate object.");
        }
        return vo.getName();
    }

    /**
     * @see Converter#getAsObject(FacesContext, UIComponent, String)
     */
    public Object getAsObject(
        FacesContext context,
        UIComponent component,
        String value)
        throws ConverterException
    {
        throw new UnsupportedOperationException();
    }
}