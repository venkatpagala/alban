<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<parent>
		<groupId>org.andromda.timetracker.ejb3</groupId>
		<artifactId>timetracker-ejb3</artifactId>
		<version>3.4</version>
	</parent>
	<artifactId>core</artifactId>
	<packaging>ejb</packaging>
	<name>TimeTracker EJB3 Core Business Tier</name>
	<dependencies>
		<dependency>
			<groupId>${project.groupId}</groupId>
			<artifactId>common</artifactId>
			<version>${project.version}</version>
		</dependency>
		<dependency>
			<groupId>commons-collections</groupId>
			<artifactId>commons-collections</artifactId>
		</dependency>
		<dependency>
			<groupId>commons-beanutils</groupId>
			<artifactId>commons-beanutils</artifactId>
		</dependency>
		<dependency>
			<groupId>commons-logging</groupId>
			<artifactId>commons-logging</artifactId>
		</dependency>
		<dependency>
			<groupId>commons-codec</groupId>
			<artifactId>commons-codec</artifactId>
		</dependency>
		<dependency>
			<groupId>commons-fileupload</groupId>
			<artifactId>commons-fileupload</artifactId>
		</dependency>

		<!-- JBoss specific dependencies -->
		<!-- 
		<dependency> 
			<groupId>org.jboss</groupId> 
			<artifactId>jboss-j2ee</artifactId> 
			<version>4.0.5-GA</version> 
		</dependency>
		<dependency> 
			<groupId>org.jboss</groupId> 
			<artifactId>jboss-ejb3-client</artifactId> 
			<version>4.0.5-GA</version> 
		</dependency>
		<dependency> 
			<groupId>org.jboss</groupId> 
			<artifactId>jboss-ejb3x</artifactId> 
			<version>4.0.5-GA</version> 
		</dependency>
		<dependency> 
			<groupId>org.jboss</groupId> 
			<artifactId>ejb3-persistence</artifactId> 
			<version>4.0.5-GA</version>
		</dependency>
		<dependency> 
			<groupId>org.jboss</groupId> 
			<artifactId>jboss-annotations-ejb3</artifactId> 
			<version>4.0.5-GA</version> 
		</dependency>
		<dependency> 
			<groupId>org.jboss</groupId> 
			<artifactId>jboss-remoting</artifactId> 
			<version>4.0.5-GA</version> 
		</dependency>
		<dependency> 
			<groupId>org.jboss</groupId> 
			<artifactId>jboss-aop-jdk50-client</artifactId> 
			<version>4.0.5-GA</version> 
		</dependency>
		<dependency> 
			<groupId>org.jboss</groupId> 
			<artifactId>jboss-aspect-jdk50-client</artifactId> 
			<version>4.0.5-GA</version>
		</dependency> 
		<dependency> 
			<groupId>org.jboss</groupId> 
			<artifactId>jbossws-client</artifactId> 
			<version>4.0.5-GA</version>
		</dependency> -->

		<!-- This is replaced by the hibernate dependencies below -->
        	<!--
        	<dependency>
        	        <groupId>jboss.jboss-embeddable-ejb3</groupId>
        	        <artifactId>hibernate-all</artifactId>
        	</dependency>
        	-->
		<!-- START This is the hibernate dependencies that replace hibernate-all -->
		<dependency>
			<groupId>org.hibernate</groupId>
			<artifactId>hibernate-core</artifactId>
                <!--<scope>test</scope> -->
		</dependency>
		<dependency>
			<groupId>org.hibernate</groupId>
			<artifactId>hibernate-entitymanager</artifactId>
                <!--<scope>test</scope> -->
		</dependency>
		<dependency>
			<groupId>org.hibernate</groupId>
			<artifactId>hibernate-validator</artifactId>
                <!--<scope>test</scope> -->
		</dependency>
		<dependency>
			<groupId>javax.validation</groupId>
			<artifactId>validation-api</artifactId>
			<!--<scope>test</scope> -->
		</dependency>

		<dependency>
			<groupId>org.hibernate</groupId>
			<artifactId>hibernate-annotations</artifactId>
			<optional>true</optional>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.hibernate</groupId>
			<artifactId>hibernate-commons-annotations</artifactId>
			<optional>true</optional>
			<scope>provided</scope>
		</dependency>

        	<!-- 
        	<dependency> 
        		<groupId>dom4j</groupId> 
        		<artifactId>dom4j</artifactId> 
        		</dependency> 
        	<dependency> 
        		<groupId>commons-lang</groupId>
			<artifactId>commons-lang</artifactId> 
		</dependency> -->
		<dependency>
			<groupId>javax.persistence</groupId>
			<artifactId>persistence-api</artifactId>
			<scope>provided</scope>
			<optional>true</optional>
		</dependency>
		<!-- END This is the hibernate dependencies that replace hibernate-all -->

        	<!-- <dependency> 
        		<groupId>org.jboss.seam.embedded</groupId> 
        		<artifactId>hibernate-all</artifactId> 
        		<version>beta3</version>
			<scope>test</scope> 
		</dependency> -->
		<!-- <dependency> 
			<groupId>org.jboss.seam.embedded</groupId> <
			artifactId>jboss-embedded-all</artifactId> 
			<version>beta3</version>
			<scope>test</scope> 
			<exclusions> 
				<exclusion> 
				<groupId>org.jboss.microcontainer</groupId> 
				<artifactId>jboss-deployers-client-spi</artifactId>
				</exclusion> 
			</exclusions> 
		</dependency> 
		<dependency> 
			<groupId>org.jboss.seam.embedded</groupId> 
			<artifactId>thirdparty-all</artifactId>
			<version>beta3</version> 
			<scope>test</scope> 
		</dependency> -->

		<!-- JBoss Seam -->
		<dependency>
			<groupId>org.jboss.seam</groupId>
			<artifactId>jboss-seam</artifactId>
			<scope>provided</scope>
		</dependency>
		
		<!-- <dependency> 
			<groupId>org.jboss.seam</groupId> 
			<artifactId>jboss-seam-ui</artifactId> 
			<scope>provided</scope> 
		</dependency>
		<dependency> 
			<groupId>org.jboss.seam</groupId> 
			<artifactId>jboss-seam-remoting</artifactId> 
			<scope>provided</scope> 
		</dependency> -->

		<dependency>
			<groupId>org.apache.myfaces.core</groupId>
			<artifactId>myfaces-api</artifactId>
		</dependency>
		<!-- <dependency> 
			<groupId>javax.faces</groupId> 
			<artifactId>jsf-api</artifactId> 
			<version>${jsf.version}</version>
			<scope>provided</scope>
		</dependency> 
		<dependency> 
			<groupId>org.richfaces.framework</groupId> 
			<artifactId>richfaces-api</artifactId> 
			<version>${richfaces.version}</version>
		</dependency> 
		<dependency> 
			<groupId>javax.ejb</groupId> 
			<artifactId>ejb-api</artifactId> 
			<version>3.0</version> 
			<scope>provided</scope>
			<optional>true</optional> 
		</dependency> 
		<dependency> 
			<groupId>javax.annotation</groupId> 
			<artifactId>jsr250-api</artifactId>
			<version>1.0</version> 
			<scope>provided</scope> 
			<optional>true</optional> 
		</dependency> -->

		<!-- <dependency> 
			<groupId>org.jboss.seam.international</groupId> 
			<artifactId>seam-international</artifactId> 
		</dependency>
		<dependency> 
			<groupId>org.jboss.seam.security</groupId> 
			<artifactId>seam-security</artifactId> 
			<scope>compile</scope>
		</dependency>
		<dependency> 
			<groupId>org.jboss.seam.transaction</groupId> 
			<artifactId>seam-transaction</artifactId> 
			<scope>compile</scope>
		</dependency> -->
		<!-- replace this by slf4j-api and slf4j-simple http://pwu-developer.blogspot.com/2010/08/caused-by-javalangerror-this-version-of.html
		<dependency> 
			<groupId>org.slf4j</groupId> 
			<artifactId>slf4j-log4j12</artifactId> 
			<version>1.6.3</version> 
			<scope>test</scope>
		</dependency> -->
		<dependency>
			<groupId>org.slf4j</groupId>
			<artifactId>slf4j-api</artifactId>
			<scope>test</scope>
		</dependency>

		<dependency>
			<groupId>org.slf4j</groupId>
			<artifactId>slf4j-simple</artifactId>
			<scope>test</scope>
        	</dependency>     
		<dependency>
			<groupId>org.testng</groupId>
			<artifactId>testng</artifactId>
		</dependency>
	</dependencies>
	<build>
		<plugins>
			<plugin>
				<groupId>org.codehaus.mojo</groupId>
				<artifactId>build-helper-maven-plugin</artifactId>
			</plugin>
			<plugin>
				<groupId>org.codehaus.mojo</groupId>
				<artifactId>hibernate3-maven-plugin</artifactId>
				<version>${hibernate3.maven.plugin.version}</version>
				<executions>
                			<!--
                			<execution>
                			  <id>hbm2ddl</id>
                			  <phase>process-classes</phase>
                			  <goals>
                			    <goal>hbm2ddl</goal>
                			  </goals>
                			</execution>
                			-->
                			<execution>
						<id>hbm2doc</id>
						<phase>site</phase>
						<goals>
							<goal>hbm2doc</goal>
							<goal>hbm2cfgxml</goal>
							<!--<goal>hbm2java</goal> -->
							<!--<goal>hbm2hbmxml</goal> -->
							<!--<goal>hbmtemplate</goal> -->
						</goals>
					</execution>
				</executions>
				<configuration>
					<components>
						<component>
							<name>hbm2ddl</name>
							<implementation>annotationconfiguration</implementation>
							<!--<implementation>configuration</implementation> -->
						</component>
						<component>
							<name>hbm2doc</name>
							<outputDirectory>${target.dir}/site/hibernate3/javadoc</outputDirectory>
							<!--<implementation>jpaconfiguration</implementation> -->
						</component>
						<component>
							<name>hbm2hbmxml</name>
							<outputDirectory>${target.dir}/hbm</outputDirectory>
							<implementation>jpaconfiguration</implementation>
						</component>
						<component>
							<name>hbm2java</name>
							<!--<outputDirectory>${target.dir}/java</outputDirectory> -->
							<implementation>annotationconfiguration</implementation>
						</component>
						<component>
							<name>hbm2cfgxml</name>
							<outputDirectory>${target.dir}/site/hibernate3/generated-mappings</outputDirectory>
							<implementation>annotationconfiguration</implementation>
							<!--<implementation>configuration</implementation> -->
						</component>
						<component>
							<name>hbmtemplate</name>
							<!--<outputDirectory>${target.dir}/cfg</outputDirectory> -->
							<implementation>jpaconfiguration</implementation>
						</component>
					</components>
					<componentProperties>
						<!--hibernate.dialect>org.hibernate.dialect.H2Dialect</hibernate.dialect -->
						<export>false</export><!-- do not export to the database: tries to use jdbc datasource -->
						<drop>true</drop>
						<create>true</create>
						<format>true</format>
						<jdk5>true</jdk5>
						<ejb3>true</ejb3>
						<!--<persistenceunit>${project.parent.artifactId}</persistenceunit> -->
						<configurationfile>${target.dir}/classes/hibernate.cfg.xml</configurationfile>
						<propertyfile>${target.dir}/classes/jdbc.properties</propertyfile>

						<outputfilename>../../../../app/src/main/sql/schema-hibernate.sql</outputfilename>
						<!-- <revengfile>${target.dir}/classes/hibernate.reveng.xml</revengfile> -->
					</componentProperties>
				</configuration>
				<dependencies>
					<dependency>
						<groupId>${jdbc.groupId}</groupId>
						<artifactId>${jdbc.artifactId}</artifactId>
						<version>${jdbc.version}</version>
					</dependency>
					<dependency>
						<groupId>org.hibernate</groupId>
						<artifactId>hibernate-core</artifactId>
						<version>${hibernate.core.version}</version>
					</dependency>
					<dependency>
						<groupId>org.hibernate</groupId>
						<artifactId>hibernate-entitymanager</artifactId>
						<version>${hibernate.entitymanager.version}</version>
					</dependency>
					<dependency>
						<groupId>javax.validation</groupId>
						<artifactId>validation-api</artifactId>
						<version>${validation.api.version}</version>
					</dependency>
					<dependency>
						<groupId>org.slf4j</groupId>
						<artifactId>slf4j-api</artifactId>
						<version>${slf4j.version}</version>
					</dependency>
					<dependency>
						<groupId>org.slf4j</groupId>
						<artifactId>slf4j-simple</artifactId>
						<version>${slf4j.version}</version>
					</dependency>
					<dependency>
						<groupId>org.hibernate</groupId>
						<artifactId>hibernate-validator</artifactId>
						<version>${hibernate.validator.version}</version>
					</dependency>
					<dependency>
						<groupId>xerces</groupId>
						<artifactId>xercesImpl</artifactId>
						<version>${xerces.version}</version>
					</dependency>
				</dependencies>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-ejb-plugin</artifactId>
				<configuration>
					<ejbVersion>3.0</ejbVersion>
					<archive>
						<manifest>
							<addClasspath>true</addClasspath>
						</manifest>
					</archive>
					<generateClient>true</generateClient>
					<excludes>
						<exclude>**/*.ref</exclude>
					</excludes>
				</configuration>
			</plugin>

			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-surefire-plugin</artifactId>
				<version>${maven.surefire.plugin.version}</version>
				<configuration>
					<suiteXmlFiles>
						<suiteXmlFile>src/test/resources/testng.xml</suiteXmlFile>
					</suiteXmlFiles>
					<!-- This trick allows the JBoss EJB3StandaloneBootstrap to find and deploy our compiled EJBs!! -->
                        		<!--
                        		<systemProperties>
                        		        <property>
                        		                <name>java.class.path</name>
                        		                <value>${target.dir}/classes</value>
                        		        </property>
                        		</systemProperties>
                        		-->
				</configuration>
			</plugin>
		</plugins>
		<!-- comment resources for mvn eclipse:eclipse -->
		<resources>
			<resource>
				<directory>src/main/resources</directory>
				<filtering>true</filtering>
				<includes>
					<include>**/*.xml</include>
					<include>**/*.properties</include>
				</includes>
				<!-- this persistence file is used by JPA in eclipse only -->
                		<!--
                		<excludes>
                		    <exclude>META-INF/persistence.xml</exclude>
                		</excludes>
                		-->
			</resource>

			<resource>
				<directory>${maven.build.generated}/main/resources</directory>
				<filtering>true</filtering>
				<excludes>
					<exclude>**/*.java</exclude>
				</excludes>
			</resource>
			<resource>
				<directory>${maven.build.generated}/main/java</directory>
				<excludes>
					<exclude>**/*.java</exclude>
				</excludes>
			</resource>
		</resources>
		<!--
		<testResources>
			<testResource>
				<directory>${basedir}/src/test/bootstrap-microcontainer</directory>
				<filtering>true</filtering>
			</testResource>
		</testResources>
		-->
	</build>
	<profiles>
		<profile>
			<id>microcontainer</id>
			<activation>
				<property>
					<name>!profile.activation</name>
				</property>
			</activation>
			<dependencies>
				<!-- 
				<dependency> 
					<groupId>jboss.jboss-embeddable-ejb3</groupId> 
					<artifactId>jboss-ejb3-all</artifactId> 
				</dependency>
				<dependency> 
					<groupId>jboss.jboss-embeddable-ejb3</groupId> 
					<artifactId>thirdparty-all</artifactId> 
					<scope>test</scope> 
				</dependency> 
				-->
				<!-- this work -->
				<dependency>
					<groupId>org.jboss.microcontainer</groupId>
					<artifactId>jboss-ejb3-all</artifactId>
					<version>alpha_9</version>
					<scope>provided</scope>
				</dependency>
				<dependency>
					<groupId>org.jboss.microcontainer</groupId>
					<artifactId>thirdparty-all</artifactId>
					<version>alpha_9</version>
					<scope>provided</scope>
				</dependency>
				<dependency>
					<groupId>org.jboss.microcontainer</groupId>
					<artifactId>jms-ra</artifactId>
					<version>alpha_9</version>
					<scope>provided</scope>
				</dependency>
				<dependency>
					<groupId>org.jboss.microcontainer</groupId>
					<artifactId>jcainflow</artifactId>
					<version>alpha_9</version>
					<scope>provided</scope>
				</dependency>
			</dependencies>
			<build>
				<testResources>
					<testResource>
						<directory>${basedir}/src/test/bootstrap-microcontainer</directory>
						<filtering>true</filtering>
					</testResource>
				</testResources>
			</build>
		</profile>
	</profiles>
</project>
